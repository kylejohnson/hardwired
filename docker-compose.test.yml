name: hardwired
services:
  pebble:
    image: ghcr.io/letsencrypt/pebble:latest
    command: -config /test/config/pebble-config.json -dnsserver challtestsrv:8053
    environment:
      - PEBBLE_VA_NOSLEEP=1
      - PEBBLE_VA_ALWAYS_VALID=0
    ports:
      - "14000:14000"   # ACME server
      - "15000:15000"   # Management interface
    depends_on:
      - challtestsrv

  challtestsrv:
    image: ghcr.io/letsencrypt/pebble-challtestsrv:latest
    command: -dns01 ":8053" -http01 "" -https01 "" -tlsalpn01 ""
    ports:
      - "8055:8055"     # Management API
